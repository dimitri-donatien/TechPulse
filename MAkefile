# ğŸ› ï¸ Variables
PYTHON=python3
DOCKER_COMPOSE=docker-compose
APP_NAME=techpulse

# ğŸ“Œ Aide - Liste des commandes disponibles
help:
	@echo "Usage: make [commande]"
	@echo ""
	@echo "Commandes disponibles :"
	@echo "  install      Installe les dÃ©pendances Python"
	@echo "  run          Lance le script principal"
	@echo "  test         ExÃ©cute les tests unitaires"
	@echo "  lint         VÃ©rifie le code avec flake8"
	@echo "  format       Reformate le code avec black"
	@echo "  docker-build Construit lâ€™image Docker"
	@echo "  docker-run   DÃ©marre lâ€™application avec Docker"
	@echo "  docker-stop  ArrÃªte les conteneurs"
	@echo "  clean        Supprime les fichiers temporaires"
	@echo ""

# ğŸ“Œ Installation des dÃ©pendances
install:
	$(PYTHON) -m pip install --upgrade pip
	$(PYTHON) -m pip install -r requirements.txt

# ğŸ“Œ Lancer le script principal
run:
	$(PYTHON) main.py

# ğŸ“Œ ExÃ©cuter les tests unitaires
test:
	$(PYTHON) -m unittest discover -s tests

# ğŸ“Œ VÃ©rifier le code avec Flake8
lint:
	flake8 --max-line-length=100 .

# ğŸ“Œ Reformater le code avec Black
format:
	black .

# ğŸ“Œ Construire lâ€™image Docker
docker-build:
	$(DOCKER_COMPOSE) build

# ğŸ“Œ Lancer lâ€™application avec Docker Compose
docker-run:
	$(DOCKER_COMPOSE) up -d

# ğŸ“Œ ArrÃªter les conteneurs Docker
docker-stop:
	$(DOCKER_COMPOSE) down

# ğŸ“Œ Nettoyer les fichiers inutiles
clean:
	find . -type f -name "*.pyc" -delete
	find . -type d -name "__pycache__" -delete
	rm -rf .mypy_cache .pytest_cache
